<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>repos: {=$file,filename} {=$file,revision}</title>
<!--{$head}-->
</head>
<body>
<div id="commandbar">
<a id="repository" href="{=$file,folderUrl}">return to repository</a>
<!--{if $file,isLatestRevision}-->
<!--{if $file,isFile}-->
<a id="edit" href="../edit/?target={=$target}{=$file,revParam}">edit</a>
<!--{/if}-->
<!--{else}-->
<a id="view" href="?target={=$target}">view latest version</a>
<!--{/if}-->
</div>
<div id="intro">
<h1><a id="realurl" class="{=$file,kind2}" href="{=$file,url}">{=$file,filename}</a>
<!--{if $file,isRevisionRequested}-->
 <span class="revision">{=$file,revisionRequested}</span>
<!--{/if}-->
</h1>
<!--{if $file,isFolder}-->
<!--{elseif $file,isLatestRevision}-->
<p>
{=if $file,isRevisionRequested}
This is the latest commit of the file (the current <a href="?target={=$target}">HEAD</a>). 
{=else}
This is the current version of the file.
{=/if}
<!--{if $file,authenticatedUser}-->
{=if not $file,isWritable}{=if $file,authenticatedUser}You have read access only.{=/if}
{=elseif $file,isLockedByThisUser} The file is currently <strong>locked</strong> by you, so other users can not edit it.
You may <a href="../edit/?target={=$target}{=$file,revParam}">edit</a> the file.
{=elseif $file,isLockedBySomeoneElse} The file is currently <strong>locked</strong> by 
<span class="username">{=$file,lockOwner}</span> {=if $file,lockComment} with message &quot;<span class="message">{=$file,lockComment}</span>&quot;{=/if}.
{=else}
You may <a href="../edit/?target={=$target}{=$file,revParam}">edit</a> the file.
{=/if}
<!--{/if}-->
</p>
<!--{else}-->
<p>This is an old version of the file. You can also <a href="?target={=$target}">view latest version</a>.</p>
<!--{/if}-->
</div>
<div class="column" style="width: 60%">
<!-- many plugins use the name #filedetails so the id is kept even though it is used for folders too -->
<div id="filedetails" class="section">
<h2>{=$file,kind2|ucfirst} details</h2>
<!-- in headline: <p>Version number: <span class="revision">{=$file,revision}</span></p> -->
<p>Path: <span class="path">{=$file,path}</span></p>
<p>Last changed revision: <span class="revision">{=$file,revisionLastChanged}</span></p>
<p>Last edited by: <span class="username">{=$file,author}</span></p>
<p>Last edited at: <span class="datetime">{=$file,date}</span></p>
<!--{if $file,isFile}-->
<p>File size: <span class="filesize">{=$file,size|formatSize}</span></p>
<!--{/if}-->
<p>Content type: <span>{=$file,type}</span></p>
<!--{if $file,isLocked}-->
<p class="lock">Locked by 
<span class="username">{=$file,lockOwner}</span> <span class="datetime">{=$file,lockCreated}</span>
{=if $file,lockComment}<br /> <span class="message">{=$file,lockComment}</span>{=/if}
</p>
<!--{/if}-->
<div class="proplist" title="{=$file,path}">
</div>
</div>
<!--{if $log}-->
<div id="editlog" class="section">
<h2>Most recent changes</h2>
<!--{assign var='logrev' value=$log|@array_keys}-->
<ul>
<!--{foreach from=$logrev item=r name=log}-->
	<!--{assign var='e' value=$log.$r}-->
	<li>
		<span class="revision">{=$r}</span>
		<span class="datetime">{=$e.date}T{=$e.time}{=$e.z}</span>
		<span class="username">{=$e.user}</span>
		<span class="message">{=$e.message|nl2br}</span>
	</li>
<!--{/foreach}-->
</ul>
</div>
<!--{/if}-->
</div>
<div class="column" style="width: 40%">
<div id="activities" class="section">
<!-- <h2>Actions to view {=$file,kind2}</h2> -->
<!--{if $file,isFile}-->
<p class="view recommendation">
{=if $file,size gt 102400}
This file is bigger than 100 kb, so we recommend <a href="download/?target={=$target}{=$file,revParam}">download</a>.
{=elseif $file,type eq 'text/html'}
This is an HTML file, so we recommend <a href="open/?target={=$target}{=$file,revParam}">open</a>.
{=elseif $file,isPlaintext}
This is file is plain text, so we recommend <a href="file/?target={=$target}{=$file,revParam}">View in Repos</a>.
{=/if}
</p>
<!--{/if}-->
<!--{if isset($fromrev)}-->
<p>
View the <a href="diff/?target={=$target}{=$file,revParam}&fromrev={=$fromrev}">difference from version {=$fromrev}</a>.
</p>
<!--{/if}-->
{=if $file,isFile}
<h3 class="view"><a id="open" href="open/?target={=$target}{=$file,revParam}">Open</a></h3>
<p>This shows the file in the current window. It is good for text files, HTML and images.
Depending on your browser, it may also work for file types like pdf, documents and spreadsheets.</p>
{=else}
<h3 class="view"><a id="open" href="list/?target={=$target}{=$file,revParam}">List contents</a></h3>
<p>Shows a defailed view of the folder's contents at the current revision.</p>
{=/if}
<h3 class="view"><a id="download" href="download/?target={=$target}{=$file,revParam}">Download</a></h3>
<p>Download this 
{=if $file,isFile} file {=else} folder as zip archive {=/if}
to your hard drive. The revision number {=$file,revision}
will be appended to the filename, so you will know which version it is.</p>
{=if $file|reposViewGetImageUrl}
<h3 class="view"><a id="viewfile" href="file/?target={=$target}{=$file,revParam}">View in repos</a></h3>
<p>View image in screen size</p>
{=elseif $file,isFile and $file,size lte REPOS_TEXT_MAXSIZE}
<h3 class="view"><a id="viewfile" href="file/?target={=$target}{=$file,revParam}">View in repos</a></h3>
<p>Read the file's contents in a web page. This is like View in browser, but with menus.
This works for text files. If the file is a binary file, like a word document,
you will see only a long line of characters.</p>
{=/if}
<h3 class="view"><a id="history" href="log/?target={=$target}{=if $file,isRevisionRequested}&torev={=$file,revision}{=/if}">View history</a></h3>
<p>View the commits that
{=if $file,isFile} have changed this file or its properties
{=else} have affected contents in this folder{=/if}.</p>

<hr class="edit"/>
<!--{if $file,isLatestRevision}-->
<!--{if $file,isFile}-->
<p class="edit recommendation">
{=if $file,isLockedByThisUser}
The file is <strong>locked</strong> by you. We recommend you <a href="../edit/upload/?target={=$target}">Upload new version</a>.
{=elseif $file,isPlaintext and $file,size lt 102400}
This is a text file that's not too big. We recommend you 
<a href="../edit/text/?target={=$target}">Edit in Repos</a>.
{=elseif $file,isPlaintext}
This is a text file. There is no need to lock it.
<a href="../open/download/?target={=$target}{=$file,revParam}">Download</a>,
edit on your computer, then <a href="../edit/upload/?target={=$target}">upload new version</a>.
{=else}
This is a binary or unknown fileformat. We recommend you Download with lock.
{=/if}
</p>

{=if not $file,isLockedByThisUser}
<h3 class="edit"><a id="download_upload" href="../edit/upload/?target={=$target}{=$file,revParam}&download">Download, modify, upload</a></h3>
<p>
<span class="explain" title="files stored as lines of text that are human-readable in any text editor, like Notepad">Text files</span> 
can be edited by different users at the same time.
The system will <span class="explain" title="combine two different changes of the same file into a new version of the file">merge</span>
changes based on the lines that changed.
</p>
<h3 class="edit"><a id="download_lock" href="../edit/lock/?target={=$target}&download">Download with lock</a></h3>
<p>
For <span class="explain" title="files stored in a non-text format created and read by a specific application">binary</span>
files, changes can not be expressed as a line
<span class="explain" title="the difference between two versions, expressed as only the lines that have changed">diff</span>.
Binary files should be edited by one user at a time.
</p>
{=/if}
<h3 class="edit"><a id="upload" href="../edit/upload/?target={=$target}">Upload new version</a></h3>
<p>
If you have already downloaded and edited the file, upload your changes to create a new verison.
</p>
<h3 class="edit"><a id="copy" href="../edit/copy/?target={=$target}">Copy, move or rename</a></h3>
<p>
Make a versioned copy of the file. Remove the file at its original location to make this a move or rename.
</p>
<h3 class="edit"><a id="delete" href="../edit/delete/?target={=$target}">Delete</a></h3>
<p>
Mark the file as deleted from now on. It will exist in History but won't be editable, and no longer visible when browsing.
To later recover the file, navigate to it in History and do a Copy Historical.
</p>
<h3 class="edit"><a id="editfile" href="../edit/text/?target={=$target}">Edit in Repos</a></h3>
<p>
Plaintext file formats can be conveniently edited in your browser.
No locking is needed.
</p>
<h3 class="edit"><a id="propedit" href="../edit/propedit/?target={=$target}">Edit properties</a></h3>
<p>
Edit versioned metadata on this item.
</p>
{=if not $file,isLocked}
<h3 class="edit"><a id="lock" href="../edit/lock/?target={=$target}">Lock file</a></h3>
<p>You can always lock a file to make it read-only for everyone else.</p>
{=elseif $file,isLockedByThisUser}
<h3 class="edit"><a id="unlock" href="../edit/unlock/?target={=$target}">Unlock file</a></h3>
<p>This file is locked by you. If you are not working with it,
you can unlock it so that others are able to edit it.</p>
{=/if}

<!--{else}--><!-- folder -->
<h3 class="edit"><a id="upload" href="../edit/upload/?target={=$target}">Add file</a></h3>
<p>
Upload a new file to this folder. For uploading new versions go instead to the details page of the file.
</p>
<h3 class="edit"><a id="propedit" href="../edit/propedit/?target={=$target}">Edit properties</a></h3>
<p>
Edit versioned metadata on this item.
</p>
<h3 class="edit"><a id="copy" href="../edit/copy/?target={=$target}">Copy, move or rename</a></h3>
<p>
Make a versioned copy of the folder and all its contents. Remove the original folder to make this a move or rename.
</p>
<h3 class="edit"><a id="delete" href="../edit/delete/?target={=$target}">Delete</a></h3>
<p>
Mark the folder and its contents as deleted from now on. It will exist in History but won't be editable, and no longer visible when browsing.
To later recover the folder, navigate to it in History and do a Copy Historical.
</p>
<!--{/if}-->

<!--{elseif $file,isRevisionRequested}-->
<h3 class="edit"><a class="edit" id="copyhistorical" href="../edit/copy/?target={=$target}&rev={=$file,revision}">Copy historical</a></h3>
<p>Any historical file or folder can be copied to the current tree.
This makes it possible to start editing removed files with preserved history.
For files or folders that still exist it creates a new branch.</p>
<!--{/if}-->
<h3 class="edit"><a class="realurl" id="useurl" href="#urlcopy" onblur="document.getElementById('urlcopy').select();">Use the URL</a></h3>
<!--{if $file,isLatestRevision}-->
<p>The URL is a global ID for the file.
In e-mails it can be used instead of attachments.
If the recipient also has a login, simply copy the URL below into the mail.
In many programs you can open the URL directly, without downloading the file first.</p>
<!--{else}-->
<p>This is not the latest version of the file, so you can not use the URL to access it.
You need to use a version control (Subversion) client like Repos.</p>
<!--{/if}-->
<hr class="custom"/>

</div>

</div>
<div id="footer">
<input id="urlcopy" title="Ctrl+C to copy the URL to clipboard" name="url" type="text" readonly="readonly" value="{=$file,url|asLink}" onclick="this.select();"/>
</div>
</body>
</html>
