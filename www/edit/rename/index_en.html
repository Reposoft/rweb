<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Rename repos item</title>
<script type="text/javascript">
function checkType() {
	var localFilename = $('#name').val();
	if ($('#newname').val()) {
		var reposFilename = $('#newname').val();
		var i = reposFilename.match(/\.(\w*$)/);
		if (!i) {
			var j = localFilename.match(/\.(\w*$)/);
			if (j) {
				var reposFilenameWithType = reposFilename + j[0];
				$('#newname').val(reposFilenameWithType);
				return true;
			}
			return true;
		}
		return true;
	}
	return true;
}
</script>
<!--{$head}-->
</head>

<body>
<div id="commandbar">
<a id="repository" href="{=$repository}{=$folder|urlEncodeNames}">return to repository</a>
</div>
<div class="intro">
<h1>Rename <span class="filename">{=$oldname}</span></h1>

{=if not $file,isWritable} <p>You have read access only. You can not rename this file.</p>
{=elseif $file,isLockedByThisUser} <p>This file is currently <strong>locked</strong> by you, so other users can not edit it.</p>
{=elseif $file,isLockedBySomeoneElse} <p>This file is currently <strong>locked</strong> by 
<span class="username">{=$file,lockOwner}</span> {=if $file,lockComment} with message &quot;<span class="message">{=$file,lockComment}</span>&quot;{=/if}. 
You can not rename this file.</p>
{=/if}
</div>
{=if $file,isWritable and not $file,isLockedBySomeoneElse}
<div class="column" style="width: 60%">
<form id="rename" name="rename" method="get" action="#">
  <fieldset>
	<legend>rename {=$target}</legend>
    <input name="target" type="hidden" id="target" value="{=$target}" />
    <input name="folder" type="hidden" id="target" value="{=$folder}" />
  <p>
    <label for="name">current name</label>
    <input id="name" name="name" type="text" size="40" disabled="disabled" value="{=$oldname}" />
    <input id="oldname" name="oldname" type="hidden" value="{=$oldname}" />
  </p>
  <p>
    <label for="newname">new name</label>
    <input name="newname" type="text" id="newname" size="40" class="required" tabindex="1" onchange="checkType()" />
</p>
  <p>
    <label for="message">history text</label>
    <textarea name="message" id="message" cols="30" rows="2" tabindex="2" ></textarea>
  </p>
  <p>
    <label for="submit"></label>
    <input id="submit" type="submit" name="submit" value="Rename" tabindex="3" />
  </p>
  </fieldset>
</form>
</div>
{=/if}
</body>
</html>
