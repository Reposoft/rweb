<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>repos: automated test</title>
</head>
<body>
<table cellpadding="1" cellspacing="1" border="1">
<thead>
<tr><td rowspan="1" colspan="3">Check the HTTP headers of javascript-files</td></tr>
</thead><tbody>
<tr>
	<td>open</td>
	<td>/repos/test/headers/</td>
	<td></td>
</tr>
<tr>
	<td>clickAndWait</td>
	<td>100bytes.js</td>
	<td></td>
</tr>
<tr>
	<td>verifyTextPresent</td>
	<td>|Content-Length: 100|</td>
	<td></td>
</tr>
<tr title="this script is in the test folder so it should usually not be cached">
	<td>storeTextPresent</td>
	<td>|Cache-Control: no-</td>
	<td></td>
</tr>

<tr>
	<td>open</td>
	<td>/repos/test/headers/</td>
	<td></td>
</tr>
<tr>
	<td>clickAndWait</td>
	<td>head.js-file</td>
	<td></td>
</tr>
<tr>
	<td>verifyTextPresent</td>
	<td>|HTTP/1.1 200 OK|</td>
	<td></td>
</tr>
<tr>
	<td>verifyTextPresent</td>
	<td>|Content-Type: application/x-javascript|</td>
	<td></td>
</tr>
<tr title="like all static contents, javascripts should be cached 24hrs">
	<td>verifyTextPresent</td>
	<td>|Cache-Control: max-age=86400|</td>
	<td></td>
</tr>
</tbody></table>
<p><small>Javascript cache headers are essential, because upgrading can cause lots of trouble for clients if script files are cached in browsers. On the other hand, scripts are too big to be sent with every page.</small></p>
</body>
</html>
