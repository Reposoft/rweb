<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>automated test</title>
</head>
<body>
<p class="description">This test required that the authenticated user has <strong>admin rights</strong> to the repository.</p>
<table>
<thead>
<tr><td colspan="3">Create user account in repository and ACL</td></tr>
</thead><tbody>
<tr>
	<td>open</td>
	<td>setup/?admin</td>
	<td></td>
</tr>
<tr>
	<td>clickAndWait</td>
	<td>accounts</td>
	<td></td>
</tr>
<tr>
	<td>clickAndWait</td>
	<td>accountcreate</td>
	<td></td>
</tr>
<tr>
	<td>type</td>
	<td>username</td>
	<td>2user</td>
</tr>
<tr>
	<td>type</td>
	<td>email</td>
	<td>test2user@repos.se</td>
</tr>
<tr>
	<td>type</td>
	<td>fullname</td>
	<td>Test Create</td>
</tr>
<tr>
	<td>clickAndWait</td>
	<td>submit</td>
	<td></td>
</tr>
<tr title="Should have created an account folder in the repository">
	<td>verifyTextPresent</td>
	<td>Created</td>
	<td></td>
</tr>
<tr title="Should have created an entry in the ACL">
	<td>verifyTextPresent</td>
	<td>Committed version</td>
	<td></td>
</tr>
<tr title="The generated password should be given to the administrator">
	<td>verifyTextPresent</td>
	<td>password is</td>
	<td></td>
</tr>
<tr>
	<td>open</td>
	<td>setup/?start</td>
	<td></td>
</tr>
<tr>
	<td>clickAndWait</td>
	<td>administration:testrepo</td>
	<td></td>
</tr>
<tr>
	<td>clickAndWait</td>
	<td>open:repos-access.acl</td>
	<td></td>
</tr>
<tr>
	<td>verifyTextPresent</td>
	<td>[/2user]</td>
	<td></td>
</tr>
<tr>
	<td>verifyTextPresent</td>
	<td>2user = rw</td>
	<td></td>
</tr>
<tr>
	<td>open</td>
	<td>setup/?root</td>
	<td></td>
</tr>
<tr title="there should be a home folder for the new user, and admin does not need access to it">
	<td>verifyElementPresent</td>
	<td>open:2user_</td>
	<td></td>
</tr>
<tr title="Make sure there is an error message if we try to create an existing user">
	<td>open</td>
	<td>setup/?admin</td>
	<td></td>
</tr>
<tr>
	<td>clickAndWait</td>
	<td>accounts</td>
	<td></td>
</tr>
<tr>
	<td>clickAndWait</td>
	<td>accountcreate</td>
	<td></td>
</tr>
<tr>
	<td>type</td>
	<td>username</td>
	<td>2user</td>
</tr>
<tr>
	<td>clickAndWait</td>
	<td>submit</td>
	<td></td>
</tr>
<tr>
	<td>verifyTextPresent</td>
	<td>error</td>
	<td></td>
</tr>
<tr>
	<td>goBack</td>
	<td></td>
	<td></td>
</tr>
<tr>
	<td>pause</td>
	<td>1000</td>
	<td></td>
</tr>
<tr title="test too short username">
	<td>type</td>
	<td>username</td>
	<td>a</td>
</tr>
<tr>
	<td>clickAndWait</td>
	<td>submit</td>
	<td></td>
</tr>
<tr>
	<td>verifyTextPresent</td>
	<td>at least</td>
	<td></td>
</tr>
<tr>
	<td>goBack</td>
	<td></td>
	<td></td>
</tr>
<tr>
	<td>pause</td>
	<td>1000</td>
	<td></td>
</tr>
<tr title="test reserved username">
	<td>type</td>
	<td>username</td>
	<td>branches</td>
</tr>
<tr>
	<td>clickAndWait</td>
	<td>submit</td>
	<td></td>
</tr>
<tr>
	<td>verifyTextPresent</td>
	<td>reserved</td>
	<td></td>
</tr>
<tr>
	<td>goBack</td>
	<td></td>
	<td></td>
</tr>
</tbody></table>
</body>
</html>