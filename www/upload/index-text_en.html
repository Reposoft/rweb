<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Upload to repos</title>
<script type="text/javascript">
function autoFillFilename(path) {

}
</script>
<!--{$head}-->
</head>

<body>
<h1>Paste contents of file</h1>
<!--{if $file}-->
<p>As a new version of file <span class="path">{=$path}{=$file}</span> <a class="action" target="_blank" href="../open/?target={=$path}{=$file}">open</a></p>
<!--{else}-->
<p>As a new file in folder {=$path}</p>
<!--{/if}-->
<p><a class="action" href="./">switch to normal file upload</a></p>
<form action="./" method="post" enctype="text/plain" name="formUpload" id="formUpload" tmt:validate="true">
<fieldset>
  <legend>Upload to repos.se</legend>
  <input type="hidden" name="targeturl" value="{=$targeturl}"/>
  <input type="hidden" name="paste" value="1"/>
  <p>
    <label for="usertext">file contents</label><br />
    <textarea name="usertext" id="usertext" cols="100" rows="30" tmt:required="true"></textarea>
    <label for="userfile"></label>
  </p>
  <p>
    <label for="currentname">name in repository</label>
	<!--{if $file}-->
    <input type="text" id="currentname" name="currentname" value="{=$file}" disabled="disabled" size="40" />
	<input type="hidden" id="name" name="name" value="{=$file}"/>
	<!--{else}-->
	<input type="text" id="name" name="name" size="40" tmt:required="true" tmt:pattern="reposFilename" tmt:message="Filename is required and may not contain ^, :, &amp;, <, >, &pound;, @, ¤, #, ~, ?, *, $, |, (, ), [, ], /, \, commas or quotes"/>
	<input type="hidden" id="create" name="create" value="yes"/>
	<!--{/if}-->
  </p>
  <p>
    <label for="message">log message</label>
    <textarea id="message" name="message" cols="40" rows="2" tmt:pattern="reposLogmessage" tmt:message="Contains invalid characters"></textarea>
  </p>
  <p>
    <label for="submit"></label>
    <input id="submit" type="submit" name="Submit" value="Upload" />
  </p>
</fieldset>
</form>
<p><a id="linkBack" class="action" href="{=$referer}">&lt; back</a></p>
</body>
</html>
