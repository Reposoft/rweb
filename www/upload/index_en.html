<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<title>Upload to repos</title>
<!--{$head}-->
<style type='text/css'>
iframe {
border-width: 0px;
height: 60px;
width: 400px;
vertical-align:top;
}
iframe.hidden {
visibility: hidden;
width:0px;
height:0px;
}
</style>
<script type="text/javascript">
function autoFillFilename(path) {
	var pos = Math.max(path.lastIndexOf('/'), path.lastIndexOf('\\'));
	if (pos > 0) {
		var filename = path.substring(pos + 1);
		document.getElementsByName('name')[0].value = filename;
	}
}
</script>
</head>

<body>
<h1>Upload file</h1>
<!--{if $file}-->
<p>As a new version of file {=$path|htmlentities}/{=$file|htmlentities}</p>
<!--{else}-->
<p>As a new file in folder {=$path|htmlentities}</p>
<!--{/if}-->
<form action="./" method="post" enctype="multipart/form-data" name="formUpload" id="formUpload">
<fieldset>
  <legend>Upload to repos.se</legend>
  <input type="hidden" name="targeturl" value="{=$targeturl}"/>
  <p>
    <label for="userfile">local file</label>
	<input type="hidden" name="MAX_FILE_SIZE" value="{=$maxfilesize}" />
    <input type="file" name="userfile" size="40" onchange="autoFillFilename(value)"/>
  </p>
  <p>
    <label for="name">name in repository</label>
	<!--{if $file}-->
    <input type="text" name="name" disabled="disabled" size="20"/>
	<!--{else}-->
	<input type="text" name="name" size="40"/>
	<input type="hidden" name="create" value="yes"/>
	<!--{/if}-->
  </p>
  <p>
    <label for="message">log message</label>
    <textarea name="message" cols="40" rows="2"></textarea>
  </p>
  <p>
    <label for="submit"></label>
    <input type="submit" name="Submit" value="Submit" onclick="this.disabled=true" />
  </p>
</fieldset>
</form>
<p><a class="action" href="{=$referer}">&lt; back</a></p>
</body>
</html>
