<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>repos: shared javascript</title>
<script type="text/javascript" src="../lib/jquery/jquery.js"></script>
<!-- the script, with a realistic url that can be used to find webappRoot -->
<script type="text/javascript" src="../../scripts/reposapi/repos.js"></script>
<!-- unit testing must be imported after Repos, so it can override functions -->
<script type="text/javascript" src="../unittest/testwalk.js"></script>
</head>

<body>
<h1>Repos shared script API</h1>
<ul>
<li><code>Repos.url</code> (the web application root, with trailing slash)</li>
<li><code>:repos-service</code> and <code>:repos-target</code> <a href="selector.html">selectors</a></li>
<li><code>$.depends</code></li>
<li><code>Repos.reportError(error)</code></li>
<li><code>Repos.addScript(srcFromWebappRoot)</code></li>
<li><code>Repos.addCss(srcFromWebappRoot)</code></li>
</ul>
<p>
Dynamic loading of scripts and css has been disabled,
because it was not reliable. Can be found in reposweb-1.1-B1.
</p>

<h2>unit tests</h2>
<p>The unit test library overrides Repos.reportError, so it can't be tested, but the surrounding functions can be.</p>
<p>Hit Ctrl+Shift+L for Firebug light debug console.</p>

<script type="text/javascript">

assert($.depends,'$.depends plugin should be defined');
assert($.depends($.fn), 'Existing object satisfies depends');
assert($.depends($.NonExistingObject), false, 'No object, depends should return nothing (or empty bucket?)');
// Od should it be a selector?

</script>

</body>
</html>
