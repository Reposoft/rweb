
<VirtualHost multirepo>
	# the server name added by Apache::Test sets correct SelfRoot in repos.properties.php

	Alias /repos-web @ServerRoot@/../www
	Alias /repos-admin @ServerRoot@/../repos-admin
	Alias /repos-plugins @ServerRoot@/../repos-plugins
	Alias /repos-test @ServerRoot@/../repos-test
	
	SetEnv REPOS_TEST_ALLOW_RESET on

	# is there a parameter for the generated hostname?
	SetEnv REPOS_REPO http://localhost:8531/repos
	# needed because currently access file path is used for test setup to get host structure folder
	SetEnv REPOS_ACCESS_FILE @ServerRoot@/hosts/original/admin/repos-access

	# during xsl development
	Header add Cache-Control "max-age=0, must-revalidate"

	<Location /repos>
		DAV svn
		SVNAutoversioning on

		SVNIndexXSLT "/repos-web/view/repos-multi.xsl"

		SVNParentPath @ServerRoot@/hosts/multirepo/repos
		SVNListParentPath on

		AuthType Basic
		AuthName "repos test multirepo"
		AuthUserFile @ServerRoot@/hosts/multirepo/admin/repos-users
		Require valid-user

		#AuthzSVNAccessFile @ServerRoot@/hosts/multirepo/admin/repos-access
		#Satisfy Any
		
		# Svn module does not set caching behavior as expected for dynamic contents
		Header add Cache-Control "max-age=0, must-revalidate"
	</Location>

</VirtualHost>

